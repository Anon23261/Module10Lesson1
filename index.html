<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta http-equiv="Permissions-Policy" content="interest-cohort=(), attribution-reporting=(), run-ad-auction=(), join-ad-interest-group=(), compute-pressure=(), browsing-topics=()">
    <title>JavaScript Security Lab</title>
    
    <!-- Core Styles -->
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <!-- CodeMirror -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/theme/monokai.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/show-hint.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/fold/foldgutter.min.css">
    
    <!-- Terminal -->
    <link rel="stylesheet" href="https://unpkg.com/xterm@4.19.0/css/xterm.css">
</head>
<body>
    <div class="container">
        <div class="matrix-bg"></div>
        
        <!-- Menu Bar -->
        <nav class="menu-bar" role="navigation">
            <div class="menu-item" id="fileMenu" role="menuitem">
                <i class="fas fa-file"></i> File
                <div class="menu-dropdown" role="menu">
                    <button class="menu-option" id="newFile" name="newFile" role="menuitem"><i class="fas fa-plus"></i> New File</button>
                    <button class="menu-option" id="openFile" name="openFile" role="menuitem"><i class="fas fa-folder-open"></i> Open</button>
                    <button class="menu-option" id="saveFile" name="saveFile" role="menuitem"><i class="fas fa-save"></i> Save</button>
                </div>
            </div>
            <div class="menu-item" id="editMenu" role="menuitem">
                <i class="fas fa-edit"></i> Edit
                <div class="menu-dropdown" role="menu">
                    <button class="menu-option" id="formatCode" name="formatCode" role="menuitem"><i class="fas fa-magic"></i> Format Code</button>
                    <button class="menu-option" id="findReplace" name="findReplace" role="menuitem"><i class="fas fa-search"></i> Find/Replace</button>
                </div>
            </div>
            <div class="menu-item" id="settingsMenu" role="menuitem">
                <i class="fas fa-cog"></i> Settings
                <div class="menu-dropdown" role="menu">
                    <div class="menu-option">
                        <i class="fas fa-palette"></i> Theme
                        <select id="syntaxTheme" name="syntaxTheme" role="combobox" aria-label="Select syntax theme">
                            <option value="monokai">Monokai</option>
                            <option value="dracula">Dracula</option>
                        </select>
                    </div>
                </div>
            </div>
        </nav>

        <!-- Main IDE Layout -->
        <div class="ide-layout">
            <!-- Left Sidebar -->
            <aside class="ide-sidebar" role="complementary">
                <div class="sidebar-section">
                    <h3><i class="fas fa-folder"></i> Project Files</h3>
                    <div class="file-tree" role="tree">
                        <button class="file-item active" id="indexHtml" name="indexHtml" role="treeitem"><i class="fas fa-file-code"></i> index.html</button>
                        <button class="file-item" id="scriptJs" name="scriptJs" role="treeitem"><i class="fas fa-code"></i> script.js</button>
                        <button class="file-item" id="styleCss" name="styleCss" role="treeitem"><i class="fas fa-file-code"></i> style.css</button>
                    </div>
                </div>
                <div class="sidebar-section">
                    <h3><i class="fas fa-book"></i> Documentation</h3>
                    <div class="doc-list" role="list">
                        <button class="doc-item" id="jsBasics" name="jsBasics" role="listitem">JavaScript Basics</button>
                        <button class="doc-item" id="securityPractices" name="securityPractices" role="listitem">Security Best Practices</button>
                        <button class="doc-item" id="apiRef" name="apiRef" role="listitem">API Reference</button>
                    </div>
                </div>
            </aside>

            <!-- Main Editor Area -->
            <main class="ide-main" role="main">
                <div class="code-section">
                    <!-- Editor Controls -->
                    <div class="editor-controls" role="toolbar" aria-label="Editor controls">
                        <button id="runButton" name="runButton" class="primary-button" title="Run Code (Ctrl+Enter)" aria-label="Run code">
                            <i class="fas fa-play" aria-hidden="true"></i> Run
                        </button>
                        <button id="clearButton" name="clearButton" title="Clear Editor" aria-label="Clear editor">
                            <i class="fas fa-eraser" aria-hidden="true"></i> Clear
                        </button>
                        <button id="formatButton" name="formatButton" title="Format Code" aria-label="Format code">
                            <i class="fas fa-magic" aria-hidden="true"></i> Format
                        </button>
                        <button id="copyCode" name="copyCode" title="Copy Code" aria-label="Copy code">
                            <i class="fas fa-copy" aria-hidden="true"></i> Copy
                        </button>
                    </div>

                    <!-- Code Editor -->
                    <div class="editor-container" role="application">
                        <textarea id="codeEditor" name="codeEditor" autocomplete="off" spellcheck="false" aria-label="Code editor">// JavaScript Security Lab
// Try out different code examples and explore security concepts!

// Example 1: String Manipulation
let userInput = "Hello, <script>alert('XSS')</script>";
let sanitized = userInput.replace(/<[^>]*>/g, '');
console.log('Sanitized:', sanitized);

// Example 2: Input Validation
function validateNumber(input) {
    if (typeof input !== 'number' || isNaN(input)) {
        throw new Error('Invalid number input');
    }
    return input;
}

// Example 3: Secure Object
const safeObject = Object.freeze({
    key: 'value',
    nested: Object.freeze({ secure: true })
});

// Try your own code below:</textarea>
                    </div>

                    <!-- Bottom Panel -->
                    <div class="bottom-panel" role="complementary">
                        <div class="panel-tabs" role="tablist">
                            <button class="panel-tab active" id="terminalTab" name="terminalTab" role="tab" aria-selected="true" aria-controls="terminal">
                                <i class="fas fa-terminal" aria-hidden="true"></i> Terminal
                            </button>
                            <button class="panel-tab" id="outputTab" name="outputTab" role="tab" aria-selected="false" aria-controls="output">
                                <i class="fas fa-stream" aria-hidden="true"></i> Output
                            </button>
                            <button class="panel-tab" id="problemsTab" name="problemsTab" role="tab" aria-selected="false" aria-controls="problems">
                                <i class="fas fa-exclamation-triangle" aria-hidden="true"></i> Problems
                            </button>
                        </div>
                        <div class="panel-content">
                            <div id="terminal" class="panel-section active" role="tabpanel" aria-labelledby="terminalTab"></div>
                            <div id="output" class="panel-section" role="tabpanel" aria-labelledby="outputTab"></div>
                            <div id="problems" class="panel-section" role="tabpanel" aria-labelledby="problemsTab"></div>
                        </div>
                    </div>
                </div>
            </main>

            <!-- Right Panel -->
            <aside class="ide-panel" role="complementary">
                <div class="panel-section">
                    <h3><i class="fas fa-info-circle" aria-hidden="true"></i> Type Inspector</h3>
                    <div id="typeInspector" class="inspector-content" role="region" aria-label="Type inspector"></div>
                </div>
                <div class="panel-section">
                    <h3><i class="fas fa-eye" aria-hidden="true"></i> Variable Watch</h3>
                    <div id="variableWatch" class="watch-content" role="region" aria-label="Variable watch"></div>
                </div>
            </aside>
        </div>

        <!-- Status Bar -->
        <footer class="status-bar" role="status">
            <div class="status-item">
                <i class="fas fa-code" aria-hidden="true"></i>
                <span id="cursorPosition" name="cursorPosition">Line: 1, Col: 1</span>
            </div>
            <div class="status-item">
                <i class="fas fa-file-alt" aria-hidden="true"></i>
                <span id="fileSize" name="fileSize">Size: 0 bytes</span>
            </div>
            <div class="status-item">
                <i class="fas fa-clock" aria-hidden="true"></i>
                <span id="executionTime" name="executionTime">Execution: 0ms</span>
            </div>
        </footer>
    </div>

    <!-- CodeMirror Core -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/codemirror.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/mode/javascript/javascript.min.js"></script>
    
    <!-- CodeMirror Addons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/closebrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/edit/matchbrackets.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/fold/foldcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/fold/foldgutter.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/show-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/hint/javascript-hint.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/codemirror/5.65.2/addon/comment/comment.min.js"></script>
    
    <!-- Code Analysis -->
    <script src="https://unpkg.com/prettier@2.8.1/standalone.js"></script>
    <script src="https://unpkg.com/prettier@2.8.1/parser-babel.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/acorn/8.7.0/acorn.min.js"></script>
    
    <!-- Terminal -->
    <script src="https://unpkg.com/xterm@4.19.0/lib/xterm.js"></script>
    <script src="https://unpkg.com/xterm-addon-fit@0.5.0/lib/xterm-addon-fit.js"></script>
    
    <!-- Custom Scripts -->
    <script src="script.js"></script>
</body>
</html>
